exports.id=847,exports.ids=[847],exports.modules={2292:(t,e,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},4118:()=>{},9733:(t,e,a)=>{Promise.resolve().then(a.bind(a,5025))},5025:(t,e,a)=>{"use strict";a.d(e,{default:()=>f});var s=a(326),i=a(7577),o=a(434),l=a(5047);let n=JSON.parse('{"app":{"name":"SOSG Running Club Hub","platform":"mobile_web_pwa","design":{"layout":"mobile_first","navigation":"bottom_tabs","tone":"warm_supportive_coaching","privacyDefault":"strict"},"roles":["CAREGIVER","COACH","ADMIN"]},"state":{"role":"COACH","authed":false,"athleteListSearch":"","athleteListSort":"Active","athleteListPage":1,"athleteListPages":2,"athleteListTotal":32,"athleteListPageSize":20,"currentDetailTab":"feed","timelineFilter":"all","uiState":{"activeModal":null,"cuesSidebarExpanded":true,"selectedActivityId":null},"strava":{"accessTokenPresent":false,"lastImportAt":null,"hashtag":"#sosg","autoImportEnabled":true,"importRules":{"mode":"TAG","timeWindowMinutes":240}}},"routes":{"initial":"login","tabs":[{"id":"tab_athletes","label":"Athletes","icon":"\uD83D\uDC65","route":"athlete_list"},{"id":"tab_profile","label":"Profile","icon":"⚙️","route":"profile"}]},"screens":[{"id":"login","title":"SOSG Running Club","route":"login","layout":{"type":"centered"},"components":[{"type":"textInput","id":"email","props":{"label":"Email","placeholder":"name@example.com"}},{"type":"passwordInput","id":"password","props":{"label":"Password"}},{"type":"select","id":"role_selector","props":{"label":"Role","options":["CAREGIVER","COACH","ADMIN"],"default":"COACH"},"actions":[{"type":"setState","path":"state.role","value":"{{value}}"}]},{"type":"button","id":"btn_login","props":{"label":"Login"},"actions":[{"type":"setState","path":"state.authed","value":true},{"type":"navigate","to":"athlete_list"}]},{"type":"link","id":"link_register","props":{"text":"Don\'t have an account? Register"},"actions":[{"type":"navigate","to":"register"}]}]},{"id":"athlete_list","title":"Athletes","route":"athlete_list","layout":{"type":"list"},"components":[{"type":"searchBar","id":"athlete_search","props":{"placeholder":"Search athletes...","autoFocus":true}},{"type":"segmentedControl","id":"athlete_sort","props":{"options":["Name","Active"],"default":"Active","stateBinding":"state.athleteListSort"},"actions":[{"type":"setState","path":"state.athleteListSort","value":"{{value}}"}]},{"type":"list","id":"athlete_cards","props":{"itemTemplate":"athleteCard","infiniteScroll":true},"dataBinding":"mockData.filteredAthletes","emptyState":{"title":"No athletes found","message":"Try adjusting your search or filters"},"actions":[{"type":"navigate","to":"athlete_detail","with":{"athleteId":"{{item.id}}"}}]},{"type":"text","id":"athletes_count","props":{"text":"Showing {{mockData.filteredAthletes.length}} athlete(s)"},"dataBinding":"mockData.filteredAthletes"},{"type":"kvList","id":"pagination_info","props":{"items":[{"k":"Page","v":"{{state.athleteListPage}} of {{state.athleteListPages}}"},{"k":"Total","v":"{{state.athleteListTotal}} athletes"}]}},{"type":"card","id":"pagination_controls","props":{"title":""},"components":[{"type":"button","id":"btn_prev_page","props":{"label":"← Previous"},"actions":[{"type":"setState","path":"state.athleteListPage","value":"{{state.athleteListPage - 1}}"}]},{"type":"button","id":"btn_next_page","props":{"label":"Next →"},"actions":[{"type":"setState","path":"state.athleteListPage","value":"{{state.athleteListPage + 1}}"}]}]}]},{"id":"athlete_detail","title":"Athlete Hub","route":"athlete_detail/:athleteId","layout":{"type":"stack"},"onEnter":[{"type":"selectAthleteByRouteParam","param":"athleteId","from":"mockData.athletesFull","target":"mockData.selectedAthlete"},{"type":"setState","path":"state.uiState.activeModal","value":null},{"type":"setState","path":"state.currentDetailTab","value":"feed"},{"type":"autoSyncStrava"}],"components":[{"type":"header","id":"hdr_athlete","props":{"leftAction":{"type":"navigate","to":"athlete_list"},"titleBinding":"mockData.selectedAthlete.name","rightIcon":"⚙️"},"actions":[{"type":"navigate","to":"athlete_settings","with":{"athleteId":"{{route.athleteId}}"}}]},{"type":"card","id":"card_athlete_stats","props":{"title":"Overview","className":"card-stats"},"components":[{"type":"kvList","id":"stats_list","props":{"items":[{"k":"Sessions","v":"{{mockData.selectedAthlete.sessionCount}}","icon":"\uD83C\uDFC3","className":"stat-row"},{"k":"Last activity","v":"{{mockData.selectedAthlete.lastActivityFormatted}}","icon":"\uD83D\uDCC5","className":"stat-row"},{"k":"Status","v":"{{mockData.selectedAthlete.status}}","icon":"✓","className":"stat-row"}]}}]},{"type":"segmentedControl","id":"detail_tabs","props":{"options":[{"label":"Feed","value":"feed"},{"label":"Cues","value":"cues"},{"label":"Settings","value":"settings"}],"default":"feed","stateBinding":"state.currentDetailTab","isTabs":true},"actions":[{"type":"setState","path":"state.currentDetailTab","value":"{{value}}"}]},{"type":"conditionalRender","id":"tab_feed","condition":"{{state.currentDetailTab === \'feed\'}}","components":[{"type":"segmentedControl","id":"timeline_filter","props":{"options":[{"label":"All","value":"all"},{"label":"Sessions","value":"session"},{"label":"Notes","value":"note"}],"default":"all","stateBinding":"state.timelineFilter","isTabs":true},"actions":[{"type":"setState","path":"state.timelineFilter","value":"{{value}}"}]},{"type":"list","id":"timeline_feed","props":{"itemTemplate":"timelineCard","className":"feed-container"},"dataBinding":"mockData.selectedAthlete.timeline","filterBinding":{"controlId":"timeline_filter","map":{"all":"*","session":"session","note":"note","milestone":"milestone"}},"emptyState":{"title":"No activities yet","message":"Add a session or enable Strava to start the athlete\'s journey."},"actions":[{"type":"setState","path":"state.uiState.selectedActivityId","value":"{{item.id}}"},{"type":"setState","path":"state.uiState.activeModal","value":"addNote"}]},{"type":"actionBar","id":"feed_actions","props":{"style":"sticky_bottom"},"components":[{"type":"button","id":"btn_add_session","visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"props":{"label":"Add Session"},"actions":[{"type":"setState","path":"state.uiState.activeModal","value":"addSession"}]},{"type":"button","id":"btn_import_strava","visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"props":{"label":"Import Strava"},"actions":[{"type":"conditionalNavigate","if":"state.strava.accessTokenPresent","to":"strava_import_review","elseTo":"strava_connect_init","with":{"athleteId":"{{route.athleteId}}"}}]}]}]},{"type":"conditionalRender","id":"tab_cues","condition":"{{state.currentDetailTab === \'cues\'}}","components":[{"type":"card","id":"card_cues","props":{"title":"What Works","collapsible":false},"dataBinding":"mockData.selectedAthlete.cues","components":[{"type":"kvList","id":"cues_list","props":{"items":[{"k":"Helps","v":"{{data.helps || \'Not set\'}}"},{"k":"Avoid","v":"{{data.avoids || \'Not set\'}}"},{"k":"Best cues","v":"{{data.bestCues || \'Not set\'}}"},{"k":"Kit","v":"{{data.kit || \'Not set\'}}"}]}}],"footerActions":[{"type":"button","id":"btn_edit_cues","visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"props":{"label":"Edit cues"},"actions":[{"type":"navigate","to":"edit_cues","with":{"athleteId":"{{route.athleteId}}"}}]}]}]},{"type":"conditionalRender","id":"tab_settings","condition":"{{state.currentDetailTab === \'settings\'}}","components":[{"type":"sectionTitle","id":"sec_privacy","props":{"text":"Privacy & Consent"}},{"type":"toggle","id":"consent_photos","props":{"label":"Allow photos in timeline","default":false}},{"type":"toggle","id":"consent_location","props":{"label":"Show route/maps to coaches","default":false}},{"type":"divider","id":"div1"},{"type":"sectionTitle","id":"sec_strava","props":{"text":"Strava Settings"}},{"type":"text","id":"strava_status","props":{"text":"{{state.strava.accessTokenPresent ? \'✓ Connected to Strava\' : \'Not connected\'}}"}},{"type":"textInput","id":"strava_hashtag","props":{"label":"Hashtag for auto-sync","placeholder":"#sosg","value":"{{state.strava.hashtag}}"},"actions":[{"type":"setState","path":"state.strava.hashtag","value":"{{value}}"}]},{"type":"button","id":"btn_connect_strava","visibility":{"condition":"{{!state.strava.accessTokenPresent}}"},"props":{"label":"Connect Strava"},"actions":[{"type":"navigate","to":"strava_connect_init","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"type":"conditionalRender","id":"modal_add_note","condition":"{{state.uiState.activeModal === \'addNote\'}}","components":[{"type":"modalOverlay","id":"overlay_add_note","props":{"title":"Add Coach Note"},"onClose":[{"type":"setState","path":"state.uiState.activeModal","value":null}],"components":[{"type":"emojiPicker","id":"modal_mood_before","props":{"label":"Mood before"}},{"type":"emojiPicker","id":"modal_mood_after","props":{"label":"Mood after"}},{"type":"textArea","id":"modal_went_well","props":{"label":"What went well","maxChars":120}},{"type":"textArea","id":"modal_was_hard","props":{"label":"What was hard","maxChars":120}},{"type":"textArea","id":"modal_next_time","props":{"label":"Next time: do / avoid","maxChars":120}},{"type":"button","id":"btn_modal_save_note","props":{"label":"Save Note"},"actions":[{"type":"mutateMock","target":"mockData.selectedAthlete.timeline","operation":"prepend","valueTemplate":"mockTemplates.newNote"},{"type":"setState","path":"state.uiState.activeModal","value":null}]}]}]},{"type":"conditionalRender","id":"modal_add_session","condition":"{{state.uiState.activeModal === \'addSession\'}}","components":[{"type":"modalOverlay","id":"overlay_add_session","props":{"title":"Add Session"},"onClose":[{"type":"setState","path":"state.uiState.activeModal","value":null}],"components":[{"type":"dateTimePicker","id":"modal_session_time","props":{"label":"Date & time"}},{"type":"numberInput","id":"modal_distance_km","props":{"label":"Distance (km)","step":0.1}},{"type":"numberInput","id":"modal_moving_minutes","props":{"label":"Moving time (min)","step":1}},{"type":"select","id":"modal_effort","props":{"label":"Effort","options":["Easy","OK","Hard"],"default":"OK"}},{"type":"button","id":"btn_modal_save_session","props":{"label":"Save Session"},"actions":[{"type":"mutateMock","target":"mockData.selectedAthlete.timeline","operation":"prepend","valueTemplate":"mockTemplates.newSessionManual"},{"type":"setState","path":"state.uiState.activeModal","value":null}]}]}]}]},{"id":"athlete_timeline","title":"Athlete Timeline","route":"athlete_timeline/:athleteId","layout":{"type":"stack"},"onEnter":[{"type":"selectAthleteByRouteParam","param":"athleteId","from":"mockData.athletesFull","target":"mockData.selectedAthlete"}],"components":[{"type":"header","id":"hdr_athlete","props":{"leftAction":{"type":"navigate","to":"athlete_list"},"titleBinding":"mockData.selectedAthlete.name","rightIcon":"⚙️"},"actions":[{"type":"navigate","to":"athlete_settings","with":{"athleteId":"{{route.athleteId}}"}}]},{"type":"card","id":"card_cues_pinned","props":{"title":"What works (pinned)","collapsible":true,"defaultCollapsed":false},"dataBinding":"mockData.selectedAthlete.cues","components":[{"type":"kvList","id":"cues_list","props":{"items":[{"k":"Helps","v":"{{data.helps}}"},{"k":"Avoid","v":"{{data.avoids}}"},{"k":"Best cues","v":"{{data.bestCues}}"},{"k":"Kit","v":"{{data.kit}}"}]}}],"footerActions":[{"type":"button","id":"btn_edit_cues","visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"props":{"label":"Edit cues"},"actions":[{"type":"navigate","to":"edit_cues","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"type":"segmentedControl","id":"timeline_filter","props":{"options":["All","Sessions","Notes","Milestones","Photos"],"default":"All"}},{"type":"list","id":"timeline_feed","props":{"itemTemplate":"timelineCard"},"dataBinding":"mockData.selectedAthlete.timeline","filterBinding":{"controlId":"timeline_filter","map":{"All":"*","Sessions":"session","Notes":"note","Milestones":"milestone","Photos":"photo"}},"emptyState":{"title":"No entries yet","message":"Add a coach note or a first session to start the athlete\'s journey."}},{"type":"actionBar","id":"timeline_actions","props":{"style":"sticky_bottom"},"components":[{"type":"button","id":"btn_add_note","visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"props":{"label":"Add Note"},"actions":[{"type":"navigate","to":"add_coach_note","with":{"athleteId":"{{route.athleteId}}"}}]},{"type":"button","id":"btn_add_session","visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"props":{"label":"Add Session"},"actions":[{"type":"navigate","to":"add_session","with":{"athleteId":"{{route.athleteId}}"}}]},{"type":"button","id":"btn_import_strava","visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"props":{"label":"Import Strava"},"actions":[{"type":"conditionalNavigate","if":"state.strava.accessTokenPresent","to":"strava_import_review","elseTo":"strava_connect_init","with":{"athleteId":"{{route.athleteId}}"}}]}]}]},{"id":"add_coach_note","title":"Add Coach Note","route":"add_coach_note/:athleteId","layout":{"type":"form"},"visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"components":[{"type":"emojiPicker","id":"mood_before","props":{"label":"Mood before"}},{"type":"emojiPicker","id":"mood_after","props":{"label":"Mood after"}},{"type":"textArea","id":"went_well","props":{"label":"What went well","maxChars":120}},{"type":"textArea","id":"was_hard","props":{"label":"What was hard","maxChars":120}},{"type":"textArea","id":"next_time","props":{"label":"Next time: do / avoid","maxChars":120}},{"type":"button","id":"btn_save_note","props":{"label":"Save Note"},"actions":[{"type":"mutateMock","target":"mockData.selectedAthlete.timeline","operation":"prepend","valueTemplate":"mockTemplates.newNote"},{"type":"navigate","to":"athlete_timeline","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"id":"add_session","title":"Add Session","route":"add_session/:athleteId","layout":{"type":"form"},"visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"components":[{"type":"dateTimePicker","id":"session_time","props":{"label":"Date & time"}},{"type":"numberInput","id":"distance_km","props":{"label":"Distance (km)","step":0.1}},{"type":"numberInput","id":"moving_minutes","props":{"label":"Moving time (min)","step":1}},{"type":"select","id":"effort","props":{"label":"Effort","options":["Easy","OK","Hard"],"default":"OK"}},{"type":"button","id":"btn_save_session","props":{"label":"Save Session"},"actions":[{"type":"mutateMock","target":"mockData.selectedAthlete.timeline","operation":"prepend","valueTemplate":"mockTemplates.newSessionManual"},{"type":"navigate","to":"athlete_timeline","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"id":"athlete_settings","title":"Athlete Settings","route":"athlete_settings/:athleteId","layout":{"type":"stack"},"onEnter":[{"type":"selectAthleteByRouteParam","param":"athleteId","from":"mockData.athletesFull","target":"mockData.selectedAthlete"}],"components":[{"type":"sectionTitle","id":"sec_privacy","props":{"text":"Privacy & Consent"}},{"type":"toggle","id":"consent_photos","props":{"label":"Allow photos in timeline","default":false}},{"type":"toggle","id":"consent_location","props":{"label":"Show route/maps to coaches","default":false}},{"type":"divider","id":"div1"},{"type":"sectionTitle","id":"sec_strava","props":{"text":"Strava"}},{"type":"button","id":"btn_strava_connect","props":{"label":"Connect Strava"},"actions":[{"type":"navigate","to":"strava_connect_init","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"id":"strava_connect_init","title":"Connect Strava","route":"strava_connect_init/:athleteId","layout":{"type":"stack"},"components":[{"type":"text","id":"strava_info","props":{"text":"Connect a Strava account to auto-import runs with your coaching hashtag. In production, this uses OAuth. For now, simulate the connection."}},{"type":"button","id":"btn_simulate_strava_connect","props":{"label":"Simulate Strava Connect"},"actions":[{"type":"setState","path":"state.strava.accessTokenPresent","value":true},{"type":"toast","message":"Strava connected (prototype)."},{"type":"navigate","to":"athlete_detail","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"id":"strava_import_review","title":"Import from Strava","route":"strava_import_review/:athleteId","layout":{"type":"stack"},"components":[{"type":"text","id":"rules_title","props":{"text":"Review & import Strava activities"}},{"type":"select","id":"import_mode","props":{"label":"Mode","options":["TAG","TIME_WINDOW"],"default":"TAG"},"actions":[{"type":"setState","path":"state.strava.importRules.mode","value":"{{value}}"}]},{"type":"textInput","id":"tag","props":{"label":"Tag (if TAG mode)","placeholder":"#sosg"}},{"type":"numberInput","id":"time_window","props":{"label":"Time window minutes (if TIME_WINDOW)","step":15}},{"type":"divider","id":"div2"},{"type":"list","id":"candidate_activities","props":{"itemTemplate":"stravaCandidateCard"},"dataBinding":"mockData.stravaCandidates"},{"type":"button","id":"btn_import_selected","props":{"label":"Import selected"},"actions":[{"type":"mutateMock","target":"mockData.selectedAthlete.timeline","operation":"prependMany","valueBinding":"mockData.stravaCandidatesSelectedAsTimelineEvents"},{"type":"setState","path":"state.strava.lastImportAt","value":"NOW"},{"type":"toast","message":"Imported (prototype)."},{"type":"navigate","to":"athlete_detail","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"id":"edit_cues","title":"Edit What Works","route":"edit_cues/:athleteId","layout":{"type":"form"},"visibility":{"roles":["CAREGIVER","COACH","ADMIN"]},"components":[{"type":"chipInput","id":"helps","props":{"label":"Helps (add multiple)"}},{"type":"chipInput","id":"avoids","props":{"label":"Avoid (add multiple)"}},{"type":"chipInput","id":"bestCues","props":{"label":"Best cues (add multiple)"}},{"type":"chipInput","id":"kit","props":{"label":"Kit (add multiple)"}},{"type":"button","id":"btn_save_cues","props":{"label":"Save"},"actions":[{"type":"toast","message":"Cues saved (prototype)."},{"type":"navigate","to":"athlete_detail","with":{"athleteId":"{{route.athleteId}}"}}]}]},{"id":"register","title":"Register","route":"register","layout":{"type":"centered"},"components":[{"type":"textInput","id":"email","props":{"label":"Email","placeholder":"name@example.com"}},{"type":"passwordInput","id":"password","props":{"label":"Password"}},{"type":"passwordInput","id":"confirm_password","props":{"label":"Confirm Password"}},{"type":"select","id":"role_selector","props":{"label":"Role","options":["CAREGIVER","COACH","ADMIN"],"default":"CAREGIVER"},"actions":[{"type":"setState","path":"state.role","value":"{{value}}"}]},{"type":"button","id":"btn_register","props":{"label":"Register"},"actions":[{"type":"setState","path":"state.authed","value":true},{"type":"navigate","to":"athlete_list"}]},{"type":"link","id":"link_login","props":{"text":"Already have an account? Login"},"actions":[{"type":"navigate","to":"login"}]}]},{"id":"profile","title":"Profile","route":"profile","layout":{"type":"stack"},"components":[{"type":"avatar","id":"user_avatar","props":{"placeholder":true}},{"type":"kvList","id":"user_info","props":{"items":[{"k":"Name","v":"Prototype User"},{"k":"Role","v":"{{state.role}}"}]}},{"type":"button","id":"btn_logout","props":{"label":"Logout"},"actions":[{"type":"setState","path":"state.authed","value":false},{"type":"navigate","to":"login"}]}]}],"templates":{"athleteCard":{"type":"card","className":"athlete-card","title":"{{item.name}}","subtitle":"Last active: {{item.lastActivityFormatted}}","meta":"{{item.sessionCount}} sessions • {{item.status}}"},"timelineCard":{"type":"card","className":"card-feed-item {{item.type }}","title":"{{item.icon}} {{item.title}}","subtitle":"{{item.subtitle}}","body":"{{item.body}}","rightContent":"{{item.date}}","badge":"{{item.source === \'STRAVA\' ? \'Auto-synced\' : \'\'}}"},"stravaCandidateCard":{"type":"card","title":"\uD83C\uDFC3 {{item.name}}","subtitle":"{{item.distanceKm}} km • {{item.movingMin}} min • {{item.date}}","body":"Tag: {{item.tag}} • Source: Strava","meta":"{{item.id}}"}},"mockData":{"athletes":[{"id":"a1","name":"Daniel","status":"active","lastActivity":"2025-02-15","lastActivityFormatted":"2 days ago","sessionCount":5,"latestMilestone":"5 sessions completed","lastSeen":"2 days ago"},{"id":"a2","name":"Ayesha","status":"active","lastActivity":"2025-02-14","lastActivityFormatted":"3 days ago","sessionCount":8,"latestMilestone":"First continuous 1km","lastSeen":"1 week ago"},{"id":"a3","name":"Marcus","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":12,"latestMilestone":"Milestone: 10 sessions","lastSeen":"Today"},{"id":"a4","name":"Emma","status":"active","lastActivity":"2025-02-16","lastActivityFormatted":"1 day ago","sessionCount":7,"latestMilestone":"Consistency week","lastSeen":"1 day ago"},{"id":"a5","name":"James","status":"inactive","lastActivity":"2025-01-20","lastActivityFormatted":"28 days ago","sessionCount":3,"latestMilestone":"Joined 2 weeks ago","lastSeen":"28 days ago"},{"id":"a6","name":"Sarah","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":15,"latestMilestone":"Longest streak: 14 days","lastSeen":"Today"},{"id":"a7","name":"Noah","status":"inactive","lastActivity":"2024-12-10","lastActivityFormatted":"69 days ago","sessionCount":2,"latestMilestone":"First run","lastSeen":"69 days ago"},{"id":"a8","name":"Olivia","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":9,"latestMilestone":"3 KM personal best","lastSeen":"Today"},{"id":"a9","name":"Liam","status":"active","lastActivity":"2025-02-10","lastActivityFormatted":"7 days ago","sessionCount":6,"latestMilestone":"5 sessions","lastSeen":"7 days ago"},{"id":"a10","name":"Ava","status":"inactive","lastActivity":"2025-01-05","lastActivityFormatted":"43 days ago","sessionCount":1,"latestMilestone":"First activity","lastSeen":"43 days ago"},{"id":"a11","name":"Ethan","status":"active","lastActivity":"2025-02-16","lastActivityFormatted":"1 day ago","sessionCount":11,"latestMilestone":"10 sessions","lastSeen":"1 day ago"},{"id":"a12","name":"Sophia","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":13,"latestMilestone":"2 week streak","lastSeen":"Today"},{"id":"a13","name":"Alexander","status":"inactive","lastActivity":"2025-01-15","lastActivityFormatted":"33 days ago","sessionCount":4,"latestMilestone":"4 sessions","lastSeen":"33 days ago"},{"id":"a14","name":"Isabella","status":"active","lastActivity":"2025-02-13","lastActivityFormatted":"4 days ago","sessionCount":10,"latestMilestone":"Consistency bonus","lastSeen":"4 days ago"},{"id":"a15","name":"Mason","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":8,"latestMilestone":"8 sessions","lastSeen":"Today"},{"id":"a16","name":"Mia","status":"inactive","lastActivity":"2024-11-20","lastActivityFormatted":"89 days ago","sessionCount":1,"latestMilestone":"Joined","lastSeen":"89 days ago"},{"id":"a17","name":"Benjamin","status":"active","lastActivity":"2025-02-12","lastActivityFormatted":"5 days ago","sessionCount":6,"latestMilestone":"Milestone","lastSeen":"5 days ago"},{"id":"a18","name":"Charlotte","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":14,"latestMilestone":"14 sessions","lastSeen":"Today"},{"id":"a19","name":"Lucas","status":"inactive","lastActivity":"2025-01-10","lastActivityFormatted":"38 days ago","sessionCount":2,"latestMilestone":"2 sessions","lastSeen":"38 days ago"},{"id":"a20","name":"Amelia","status":"active","lastActivity":"2025-02-16","lastActivityFormatted":"1 day ago","sessionCount":7,"latestMilestone":"7 sessions","lastSeen":"1 day ago"},{"id":"a21","name":"Michael","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":11,"latestMilestone":"11 sessions","lastSeen":"Today"},{"id":"a22","name":"Harper","status":"inactive","lastActivity":"2025-01-25","lastActivityFormatted":"23 days ago","sessionCount":3,"latestMilestone":"3 sessions","lastSeen":"23 days ago"},{"id":"a23","name":"William","status":"active","lastActivity":"2025-02-14","lastActivityFormatted":"3 days ago","sessionCount":9,"latestMilestone":"9 sessions","lastSeen":"3 days ago"},{"id":"a24","name":"Evelyn","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":16,"latestMilestone":"16 sessions","lastSeen":"Today"},{"id":"a25","name":"Henry","status":"inactive","lastActivity":"2024-12-01","lastActivityFormatted":"78 days ago","sessionCount":1,"latestMilestone":"Joined","lastSeen":"78 days ago"},{"id":"a26","name":"Abigail","status":"active","lastActivity":"2025-02-15","lastActivityFormatted":"2 days ago","sessionCount":8,"latestMilestone":"8 sessions","lastSeen":"2 days ago"},{"id":"a27","name":"Jacob","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":10,"latestMilestone":"10 sessions","lastSeen":"Today"},{"id":"a28","name":"Elizabeth","status":"inactive","lastActivity":"2025-02-01","lastActivityFormatted":"16 days ago","sessionCount":2,"latestMilestone":"2 sessions","lastSeen":"16 days ago"},{"id":"a29","name":"Jackson","status":"active","lastActivity":"2025-02-13","lastActivityFormatted":"4 days ago","sessionCount":5,"latestMilestone":"5 sessions","lastSeen":"4 days ago"},{"id":"a30","name":"Ella","status":"active","lastActivity":"2025-02-17","lastActivityFormatted":"Today","sessionCount":12,"latestMilestone":"12 sessions","lastSeen":"Today"},{"id":"a31","name":"Sebastian","status":"inactive","lastActivity":"2025-01-30","lastActivityFormatted":"18 days ago","sessionCount":3,"latestMilestone":"3 sessions","lastSeen":"18 days ago"},{"id":"a32","name":"Grace","status":"active","lastActivity":"2025-02-16","lastActivityFormatted":"1 day ago","sessionCount":9,"latestMilestone":"9 sessions","lastSeen":"1 day ago"}],"filteredAthletes":[],"athletesFull":[{"id":"a1","name":"Daniel","status":"active","sessionCount":5,"lastActivityFormatted":"2 days ago","lastActivity":"2025-02-15","cues":{"helps":"Countdown cues, run/walk 2/1, consistent route","avoids":"Sudden loud noises, mid-run route changes","bestCues":"2 more lamp posts, steady breathing","kit":"Water at 15 min, cap"},"timeline":[{"type":"session","source":"STRAVA","icon":"\uD83C\uDFC3","title":"Session","subtitle":"2.3 km • 24 min • Effort: OK","body":"Imported from Strava (tag #sosg).","date":"Sat 10:10","id":"t1"},{"type":"note","icon":"\uD83D\uDCDD","title":"Coach note","subtitle":"Mood \uD83D\uDE10 → \uD83D\uDE0A","body":"Went well: steady pace. Hard: tired at 20 min. Next: water at 15.","date":"Sat 10:35","id":"t2"},{"type":"milestone","icon":"\uD83C\uDF89","title":"Milestone","subtitle":"5 sessions completed","body":"Consistency win — keep it going.","date":"Sat 10:36","id":"t3"}]},{"id":"a2","name":"Ayesha","status":"active","sessionCount":8,"lastActivityFormatted":"3 days ago","lastActivity":"2025-02-14","cues":{"helps":"Short cues, predictable stops","avoids":"Crowded paths","bestCues":"One more minute","kit":"Water, sunglasses"},"timeline":[]}],"selectedAthlete":{"id":"a1","name":"Daniel","status":"active","sessionCount":5,"lastActivityFormatted":"2 days ago","cues":{"helps":"","avoids":"","bestCues":"","kit":""},"timeline":[]},"stravaCandidates":[{"id":"s101","name":"Morning Run","distanceKm":2.1,"movingMin":22,"date":"Sun 09:15","tag":"#sosg"},{"id":"s102","name":"Park Jog","distanceKm":3,"movingMin":31,"date":"Wed 18:40","tag":""}],"stravaCandidatesSelectedAsTimelineEvents":[{"type":"session","source":"STRAVA","icon":"\uD83C\uDFC3","title":"Session","subtitle":"2.1 km • 22 min • Effort: OK","body":"Imported from Strava.","date":"Just now"}]},"mockTemplates":{"newNote":{"type":"note","icon":"\uD83D\uDCDD","title":"Coach note","subtitle":"Mood \uD83D\uDE0A → \uD83D\uDE0A","body":"Went well: (from form). Hard: (from form). Next: (from form).","date":"Just now","id":"new-note-{{timestamp}}"},"newSessionManual":{"type":"session","source":"MANUAL","icon":"\uD83C\uDFC3","title":"Session","subtitle":"(from form) km • (from form) min • Effort: (from form)","body":"Added manually.","date":"Just now","id":"new-session-{{timestamp}}"}}}'),r=function(t){let e=[];for(let a of["app","state","routes","screens","templates","mockData","mockTemplates"])a in(t||{})||e.push(`Missing required key: ${a}`);return(Array.isArray(t?.screens)?t.screens.forEach((t,a)=>{for(let s of["id","route","components"])s in(t||{})||e.push(`screens[${a}] missing key: ${s}`)}):e.push("screens must be an array"),e.length)?{ok:!1,errors:e}:{ok:!0,spec:t}}(n);function d(t,e){return e.split(".").reduce((t,e)=>null==t?void 0:t[e],t)}function c(t,e,a){let s=e.split("."),i=t;for(let t=0;t<s.length-1;t+=1){let e=s[t];(null==i[e]||"object"!=typeof i[e])&&(i[e]={}),i=i[e]}i[s[s.length-1]]=a}function p(t,e){return"string"!=typeof t?t:t.replace(/{{\s*([^}]+)\s*}}/g,(t,a)=>{let s=d(e,a.trim());return null==s?"":String(s)})}function m(t,e={}){let a=n.screens.find(e=>e.id===t);if(!a)return"/";let s=a.route.replace(/:([A-Za-z0-9_]+)/g,(t,a)=>e[a]??"");return`/${s}`}var u=a(551);let y={state:structuredClone(n.state),mockData:structuredClone(n.mockData),mockTemplates:structuredClone(n.mockTemplates),controls:{},form:{},persistEnabled:!1},h=(0,u.Ue)((t,e)=>({...y,initPersistence:()=>{},getByPath:t=>d(e(),t),setByPath:(e,a)=>{t(t=>{let s={...t,state:structuredClone(t.state),mockData:structuredClone(t.mockData),mockTemplates:structuredClone(t.mockTemplates),controls:{...t.controls},form:{...t.form}};return c(s,e,a),s})},setControl:(e,a)=>t(t=>({controls:{...t.controls,[e]:a}})),setFormValue:(e,a)=>t(t=>({form:{...t.form,[e]:a}})),mutateMock:(e,a,s)=>{t(t=>{let i={...t,state:structuredClone(t.state),mockData:structuredClone(t.mockData),mockTemplates:structuredClone(t.mockTemplates),controls:{...t.controls},form:{...t.form}},o=d(i,e)??[];"prepend"===a&&o.unshift(s),"prependMany"===a&&o.unshift(...s),c(i,e,o);let l=i.mockData.selectedAthlete,n=i.mockData.athletesFull.map(t=>t.id===l.id?l:t);return i.mockData.athletesFull=n,i})},computeFilteredAthletes:()=>{t(t=>{let e={...t,state:structuredClone(t.state),mockData:structuredClone(t.mockData)},a=e.state.athleteListSearch||"",s=e.state.athleteListSort||"active",i=function(t,e,a){let s=t;if(e.trim()){let t=e.toLowerCase();s=s.filter(e=>e.name.toLowerCase().includes(t))}return"name"===a?s=s.sort((t,e)=>t.name.localeCompare(e.name)):("active"===a||"Active"===a)&&(s=s.sort((t,e)=>{let a="active"===t.status?0:1,s="active"===e.status?0:1;return a!==s?a-s:new Date(e.lastActivity).getTime()-new Date(t.lastActivity).getTime()})),s}(e.mockData.athletes,a,s),o=e.state.athleteListPageSize||20,l=Math.max(0,e.state.athleteListPage||0);return e.mockData.filteredAthletes=i.slice(0,(l+1)*o),e})},loadMoreAthletes:()=>{t(t=>({state:{...t.state,athleteListPage:(t.state.athleteListPage||0)+1}}))}}));function v(t,e){return!t?.roles||t.roles.includes(e)}function g({screenId:t,routeParams:e}){let a=(0,i.useMemo)(()=>n.screens.find(e=>e.id===t),[t]),r=(0,l.useRouter)(),d=h();if(!a)return(0,s.jsxs)("div",{children:["Screen missing: ",t]});if(!v(a.visibility,d.state.role))return(0,s.jsxs)("div",{"data-testid":`screen-${a.id}`,children:[s.jsx("p",{children:"Access denied"}),s.jsx(o.default,{href:"/athlete_list",children:"Go to athlete list"})]});let c={store:d,routeParams:e,route:e,state:d.state,data:null,router:r};return(0,s.jsxs)("main",{className:"page","data-testid":`screen-${a.id}`,children:[s.jsx("h1",{children:a.title}),a.components.map(t=>v(t.visibility,d.state.role)?s.jsx(b,{component:t,ctx:c},t.id):null)]})}function b({component:t,ctx:e,item:a,index:i}){let o=e.store,l=o.state.role;if(!v(t.visibility,l))return null;let r=(t=[],s={})=>{let i=s.item??a;t.forEach(t=>(function(t,e){try{let{store:a,routeParams:s,router:i}=e;if("setState"===t.type){let s=t.path,i=p(t.value,e);a.setByPath(s,i)}if("navigate"===t.type){let a=Object.fromEntries(Object.entries(t.with||{}).map(([t,a])=>[t,p(a,e)])),s=m(t.to,a);i&&i.push(s)}if("conditionalNavigate"===t.type){let s=!!a.getByPath(t.if),o=Object.fromEntries(Object.entries(t.with||{}).map(([t,a])=>[t,p(a,e)]));i.push(m(s?t.to:t.elseTo,o))}if("selectAthleteByRouteParam"===t.type){let e=a.getByPath(t.from)||[],i=s[t.param],o=e.find(t=>t.id===i);o&&a.setByPath(t.target,o)}if("mutateMock"===t.type&&(t.valueBinding&&a.mutateMock(t.target,t.operation,a.getByPath(t.valueBinding)),t.valueTemplate)){let e=structuredClone(a.getByPath(t.valueTemplate));"note"===e.type&&(e.body=`Went well: ${a.getByPath("form.went_well")||"(from form)"}. Hard: ${a.getByPath("form.was_hard")||"(from form)"}. Next: ${a.getByPath("form.next_time")||"(from form)"}.`),a.mutateMock(t.target,t.operation,e)}if("autoSyncStrava"===t.type){let t=a.getByPath("state.strava.hashtag")||"#sosg",e=(a.getByPath("mockData.stravaCandidates")||[]).filter(e=>e.tag===t);if(e.length>0&&a.getByPath("state.strava.accessTokenPresent")){let t=e.map(t=>({type:"session",source:"STRAVA",icon:"\uD83C\uDFC3",title:"Session",subtitle:`${t.distanceKm} km • ${t.movingMin} min • Effort: OK`,body:`Auto-imported from Strava (${t.name}).`,date:t.date,id:`strava-${t.id}`}));a.mutateMock("mockData.selectedAthlete.timeline","prependMany",t),a.setByPath("state.strava.lastImportAt",new Date().toISOString())}}}catch(e){console.error("[runAction-error]",e,t)}})(t,{...e,...s,item:i}))},d=t.id;if("conditionalRender"===t.type)return p(t.condition,{...e,item:a})?s.jsx(s.Fragment,{children:t.components?.map(t=>s.jsx(b,{component:t,ctx:e,item:a},t.id))}):null;if("modalOverlay"===t.type){let a=t.onClose||[];return s.jsx("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal-content",style:{maxHeight:"80vh",overflow:"auto"},children:[(0,s.jsxs)("div",{className:"modal-header",children:[s.jsx("h3",{style:{margin:0,flex:1},children:t.props?.title}),s.jsx("button",{className:"modal-close",onClick:()=>r(a),children:"✕"})]}),s.jsx("div",{style:{padding:"var(--space-4)"},children:t.components?.map(t=>s.jsx(b,{component:t,ctx:e},t.id))})]})})}if("text"===t.type)return s.jsx("p",{children:p(t.props?.text,{...e,item:a})});if("divider"===t.type)return s.jsx("hr",{});if("image"===t.type||"avatar"===t.type)return s.jsx("div",{className:"card",children:t.props?.alt||"Avatar"});if("sectionTitle"===t.type)return s.jsx("h2",{children:t.props?.text});if("searchBar"===t.type)return s.jsx("input",{"data-testid":`search-${d}`,placeholder:t.props?.placeholder,value:o.state.athleteListSearch||"",onChange:t=>{o.setByPath("state.athleteListSearch",t.target.value),o.setByPath("state.athleteListPage",0)}});if("header"===t.type)return(0,s.jsxs)("div",{className:"card",children:[s.jsx("button",{onClick:()=>r([t.props.leftAction]),children:"Back"}),s.jsx("strong",{children:o.getByPath(t.props.titleBinding)}),s.jsx("button",{onClick:()=>r(t.actions),children:t.props.rightIcon})]});if("kvList"===t.type)return s.jsx("dl",{children:t.props.items.map(t=>{let i=p(t.v,{...e,data:e.data,item:a});return(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("dt",{children:t.k}),s.jsx("dd",{children:i})]},t.k)})});if("toggle"===t.type)return(0,s.jsxs)("label",{children:[s.jsx("input",{"data-testid":`toggle-${d}`,type:"checkbox",defaultChecked:t.props?.default}),t.props?.label]});if("button"===t.type)return s.jsx("button",{"data-testid":`btn-${d}`,onClick:()=>r(t.actions),children:t.props?.label});if("link"===t.type)return s.jsx("a",{"data-testid":`link-${d}`,onClick:()=>r(t.actions),style:{cursor:"pointer",color:"var(--accent)",textDecoration:"underline"},children:t.props?.text});if(["textInput","passwordInput","numberInput","textArea","dateTimePicker","chipInput","emojiPicker"].includes(t.type)){let e="textArea"===t.type?"textarea":"input";return(0,s.jsxs)("label",{children:[t.props?.label,s.jsx(e,{"data-testid":`input-${d}`,type:"passwordInput"===t.type?"password":"numberInput"===t.type?"number":"dateTimePicker"===t.type?"datetime-local":"text",placeholder:t.props?.placeholder,onChange:t=>o.setFormValue(d,t.target.value)})]})}if("select"===t.type){let e=t.props?.options||[],a=e.length>0&&"object"==typeof e[0];return(0,s.jsxs)("label",{children:[t.props?.label,s.jsx("select",{"data-testid":`select-${d}`,defaultValue:t.props?.default,onChange:e=>{let a=e.target.value;o.setFormValue(d,a),r(t.actions,{value:a})},children:a?e.map(t=>s.jsx("option",{value:t.value,children:t.label},t.value)):e.map(t=>s.jsx("option",{value:t,children:t},t))})]})}if("segmentedControl"===t.type){let e=t.props?.options||[],a=e.length>0&&"object"==typeof e[0],i=t.props?.stateBinding?o.getByPath(t.props.stateBinding):o.controls[d],l=t.props?.default,n=i||l;return t.props?.isTabs||t.id?.includes("tabs")||t.id?.includes("detail_tabs")?s.jsx("div",{className:"tab-container",children:a?e.map(e=>s.jsx("button",{type:"button",className:`tab-button ${n===e.value?"active":""}`,onClick:()=>{o.setByPath(t.props.stateBinding||"",e.value),r(t.actions,{value:e.value})},children:e.label},e.value)):e.map(e=>s.jsx("button",{type:"button",className:`tab-button ${n===e?"active":""}`,onClick:()=>{o.setByPath(t.props.stateBinding||"",e),r(t.actions,{value:e})},children:e},e))}):s.jsx("div",{className:"segmented-group",children:a?e.map(e=>s.jsx("button",{type:"button",className:`segmented-button ${n===e.value?"active":""}`,onClick:()=>{o.setControl(d,e.value),o.setByPath(t.props.stateBinding||"",e.value),r(t.actions,{value:e.value})},children:e.label},e.value)):e.map(e=>s.jsx("button",{type:"button",className:`segmented-button ${n===e?"active":""}`,onClick:()=>{o.setControl(d,e),o.setByPath(t.props.stateBinding||"",e),r(t.actions,{value:e})},children:e},e))})}if("card"===t.type){let a=t.dataBinding?o.getByPath(t.dataBinding):null;return(0,s.jsxs)("section",{className:"card","data-testid":`card-${d}`,children:[s.jsx("h3",{children:t.props?.title}),t.components?.map(t=>s.jsx(b,{component:t,ctx:{...e,data:a}},t.id)),t.footerActions?.map(t=>s.jsx(b,{component:t,ctx:e},t.id))]})}if("actionBar"===t.type)return s.jsx("div",{className:"card",children:t.components.map(t=>s.jsx(b,{component:t,ctx:e},t.id))});if("list"===t.type){let a=o.getByPath(t.dataBinding)||[];if(t.filterBinding){let e=t.filterBinding.controlId,s=o.controls[e]||o.getByPath(`state.${e}`)||t.filterBinding.default||"all",i=t.filterBinding.map[s];i&&"*"!==i&&(a=a.filter(t=>t.type===i))}return!a.length&&t.emptyState?(0,s.jsxs)("div",{"data-testid":`list-${d}`,children:[s.jsx("strong",{children:t.emptyState.title}),s.jsx("p",{children:t.emptyState.message})]}):s.jsx("div",{"data-testid":`list-${d}`,className:t.props?.className||"",children:a.map((a,i)=>{if(t.props?.itemTemplate==="athleteCard")return(0,s.jsxs)("button",{className:"card","data-testid":`athlete-card-${a.id}`,onClick:()=>r(t.actions,{item:a}),children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"8px"},children:[s.jsx("strong",{children:p(n.templates.athleteCard.title,{...e,item:a})}),a.status&&s.jsx("span",{className:`badge-${a.status}`,children:a.status})]}),s.jsx("span",{children:p(n.templates.athleteCard.subtitle,{...e,item:a})}),s.jsx("span",{style:{fontSize:"var(--text-meta)",color:"var(--text-secondary)"},children:p(n.templates.athleteCard.meta,{...e,item:a})})]},a.id);if(t.props?.itemTemplate==="timelineCard"){let o=n.templates.timelineCard,l=p(o.badge,{...e,item:a});return(0,s.jsxs)("article",{className:`card ${o.className}`,"data-testid":`timeline-item-${i}`,onClick:()=>r(t.actions,{item:a}),style:{cursor:"pointer"},children:[s.jsx("strong",{children:p(o.title,{...e,item:a})}),s.jsx("p",{children:p(o.subtitle,{...e,item:a})}),s.jsx("p",{children:p(o.body,{...e,item:a})}),l&&s.jsx("span",{className:"feed-item-badge feed-item-badge-strava-sync",children:l}),s.jsx("span",{style:{fontSize:"var(--text-meta)",color:"var(--text-secondary)"},children:p(o.rightContent,{...e,item:a})})]},a.id||i)}return s.jsx("article",{className:"card",children:s.jsx("strong",{children:p(n.templates.stravaCandidateCard.title,{...e,item:a})})},a.id)})})}return(0,s.jsxs)("div",{children:["Unsupported component ",t.type,i]})}function f({screenId:t,routeParams:e={}}){return r.ok?s.jsx(g,{screenId:t,routeParams:e}):(0,s.jsxs)("main",{className:"page",children:[s.jsx("h1",{children:"Spec validation error"}),s.jsx("pre",{children:r.errors.join("\n")})]})}},2029:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>o,metadata:()=>i});var s=a(9510);a(5023);let i={title:"SOSG Running Club Hub"};function o({children:t}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:t})})}},9940:(t,e,a)=>{"use strict";a.d(e,{Z:()=>s});let s=(0,a(8570).createProxy)(String.raw`/workspaces/runsosg/src/components/SpecGate.tsx#default`)},5023:()=>{}};