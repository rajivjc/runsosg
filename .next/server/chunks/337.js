exports.id=337,exports.ids=[337],exports.modules={9733:(e,t,a)=>{Promise.resolve().then(a.bind(a,219))},219:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var s=a(326),i=a(7577),n=a(434),r=a(5047),l=a(2051),o=a(4640);function d(e,t){return"string"!=typeof e?e:e.replace(/{{\s*([^}]+)\s*}}/g,(e,a)=>{let s=(0,o.M)(t,a.trim());return null==s?"":String(s)})}function c(e,t={}){let a=l.Yk.screens.find(t=>t.id===e);if(!a)return"/";let s=a.route.replace(/:([A-Za-z0-9_]+)/g,(e,a)=>t[a]??"");return`/${s}`}var p=a(6040);function u(e,t){return!e?.roles||e.roles.includes(t)}function m({screenId:e,routeParams:t}){let a=(0,i.useMemo)(()=>l.Yk.screens.find(t=>t.id===e),[e]),o=(0,r.useRouter)(),d=(0,p.q)();if(!a)return(0,s.jsxs)("div",{children:["Screen missing: ",e]});if(!u(a.visibility,d.state.role))return(0,s.jsxs)("div",{"data-testid":`screen-${a.id}`,children:[s.jsx("p",{children:"Access denied"}),s.jsx(n.default,{href:"/athlete_list",children:"Go to athlete list"})]});let c={store:d,routeParams:t,route:t,state:d.state,data:null,router:o};return(0,s.jsxs)("div",{"data-testid":`screen-${a.id}`,children:[a.layout?.type!=="centered"&&s.jsx("h1",{children:a.title}),a.components.map(e=>u(e.visibility,d.state.role)?s.jsx(h,{component:e,ctx:c},e.id):null)]})}function h({component:e,ctx:t,item:a,index:i}){let n=t.store,r=n.state.role;if(!u(e.visibility,r))return null;let o=(e=[],s={})=>{let i=s.item??a;e.forEach(e=>(function(e,t){try{let{store:a,routeParams:s,router:i}=t;if("setState"===e.type){let s=e.path,i=d(e.value,t);a.setByPath(s,i)}if("navigate"===e.type){let a=Object.fromEntries(Object.entries(e.with||{}).map(([e,a])=>[e,d(a,t)])),s=c(e.to,a);i&&i.push(s)}if("conditionalNavigate"===e.type){let s=!!a.getByPath(e.if),n=Object.fromEntries(Object.entries(e.with||{}).map(([e,a])=>[e,d(a,t)]));i.push(c(s?e.to:e.elseTo,n))}if("selectAthleteByRouteParam"===e.type){let t=a.getByPath(e.from)||[],i=s[e.param],n=t.find(e=>e.id===i);n&&a.setByPath(e.target,n)}if("mutateMock"===e.type&&(e.valueBinding&&a.mutateMock(e.target,e.operation,a.getByPath(e.valueBinding)),e.valueTemplate)){let t=structuredClone(a.getByPath(e.valueTemplate));"note"===t.type&&(t.body=`Went well: ${a.getByPath("form.went_well")||"(from form)"}. Hard: ${a.getByPath("form.was_hard")||"(from form)"}. Next: ${a.getByPath("form.next_time")||"(from form)"}.`),a.mutateMock(e.target,e.operation,t)}if("autoSyncStrava"===e.type){let e=a.getByPath("state.strava.hashtag")||"#sosg",t=(a.getByPath("mockData.stravaCandidates")||[]).filter(t=>t.tag===e);if(t.length>0&&a.getByPath("state.strava.accessTokenPresent")){let e=t.map(e=>({type:"session",source:"STRAVA",icon:"\uD83C\uDFC3",title:"Session",subtitle:`${e.distanceKm} km • ${e.movingMin} min • Effort: OK`,body:`Auto-imported from Strava (${e.name}).`,date:e.date,id:`strava-${e.id}`}));a.mutateMock("mockData.selectedAthlete.timeline","prependMany",e),a.setByPath("state.strava.lastImportAt",new Date().toISOString())}}}catch(t){console.error("[runAction-error]",t,e)}})(e,{...t,...s,item:i}))},p=e.id;if("conditionalRender"===e.type)return d(e.condition,{...t,item:a})?s.jsx(s.Fragment,{children:e.components?.map(e=>s.jsx(h,{component:e,ctx:t,item:a},e.id))}):null;if("modalOverlay"===e.type){let a=e.onClose||[];return s.jsx("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal-content",style:{maxHeight:"80vh",overflow:"auto"},children:[(0,s.jsxs)("div",{className:"modal-header",children:[s.jsx("h3",{style:{margin:0,flex:1},children:e.props?.title}),s.jsx("button",{className:"modal-close",onClick:()=>o(a),children:"✕"})]}),s.jsx("div",{style:{padding:"var(--space-4)"},children:e.components?.map(e=>s.jsx(h,{component:e,ctx:t},e.id))})]})})}if("text"===e.type)return s.jsx("p",{children:d(e.props?.text,{...t,item:a})});if("divider"===e.type)return s.jsx("hr",{});if("image"===e.type||"avatar"===e.type)return s.jsx("div",{className:"card",children:e.props?.alt||"Avatar"});if("sectionTitle"===e.type)return s.jsx("h2",{children:e.props?.text});if("searchBar"===e.type)return s.jsx("input",{"data-testid":`search-${p}`,placeholder:e.props?.placeholder,value:n.state.athleteListSearch||"",onChange:e=>{n.setByPath("state.athleteListSearch",e.target.value),n.setByPath("state.athleteListPage",0)}});if("header"===e.type)return(0,s.jsxs)("div",{className:"card",children:[s.jsx("button",{onClick:()=>o([e.props.leftAction]),children:"Back"}),s.jsx("strong",{children:n.getByPath(e.props.titleBinding)}),s.jsx("button",{onClick:()=>o(e.actions),children:e.props.rightIcon})]});if("kvList"===e.type)return s.jsx("dl",{children:e.props.items.map(e=>{let i=d(e.v,{...t,data:t.data,item:a});return(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("dt",{children:e.k}),s.jsx("dd",{children:i})]},e.k)})});if("toggle"===e.type)return(0,s.jsxs)("label",{children:[s.jsx("input",{"data-testid":`toggle-${p}`,type:"checkbox",defaultChecked:e.props?.default}),e.props?.label]});if("button"===e.type)return s.jsx("button",{"data-testid":`btn-${p}`,onClick:()=>o(e.actions),children:e.props?.label});if("link"===e.type)return s.jsx("a",{"data-testid":`link-${p}`,onClick:()=>o(e.actions),style:{cursor:"pointer",color:"var(--accent)",textDecoration:"underline"},children:e.props?.text});if(["textInput","passwordInput","numberInput","textArea","dateTimePicker","chipInput","emojiPicker"].includes(e.type)){let t="textArea"===e.type?"textarea":"input";return(0,s.jsxs)("label",{children:[e.props?.label,s.jsx(t,{"data-testid":`input-${p}`,type:"passwordInput"===e.type?"password":"numberInput"===e.type?"number":"dateTimePicker"===e.type?"datetime-local":"text",placeholder:e.props?.placeholder,onChange:e=>n.setFormValue(p,e.target.value)})]})}if("select"===e.type){let t=e.props?.options||[],a=t.length>0&&"object"==typeof t[0];return(0,s.jsxs)("label",{children:[e.props?.label,s.jsx("select",{"data-testid":`select-${p}`,defaultValue:e.props?.default,onChange:t=>{let a=t.target.value;n.setFormValue(p,a),o(e.actions,{value:a})},children:a?t.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value)):t.map(e=>s.jsx("option",{value:e,children:e},e))})]})}if("segmentedControl"===e.type){let t=e.props?.options||[],a=t.length>0&&"object"==typeof t[0],i=e.props?.stateBinding?n.getByPath(e.props.stateBinding):n.controls[p],r=e.props?.default,l=i||r;return e.props?.isTabs||e.id?.includes("tabs")||e.id?.includes("detail_tabs")?s.jsx("div",{className:"tab-container",children:a?t.map(t=>s.jsx("button",{type:"button",className:`tab-button ${l===t.value?"active":""}`,onClick:()=>{n.setByPath(e.props.stateBinding||"",t.value),o(e.actions,{value:t.value})},children:t.label},t.value)):t.map(t=>s.jsx("button",{type:"button",className:`tab-button ${l===t?"active":""}`,onClick:()=>{n.setByPath(e.props.stateBinding||"",t),o(e.actions,{value:t})},children:t},t))}):s.jsx("div",{className:"segmented-group",children:a?t.map(t=>s.jsx("button",{type:"button",className:`segmented-button ${l===t.value?"active":""}`,onClick:()=>{n.setControl(p,t.value),n.setByPath(e.props.stateBinding||"",t.value),o(e.actions,{value:t.value})},children:t.label},t.value)):t.map(t=>s.jsx("button",{type:"button",className:`segmented-button ${l===t?"active":""}`,onClick:()=>{n.setControl(p,t),n.setByPath(e.props.stateBinding||"",t),o(e.actions,{value:t})},children:t},t))})}if("card"===e.type){let a=e.dataBinding?n.getByPath(e.dataBinding):null;return(0,s.jsxs)("section",{className:"card","data-testid":`card-${p}`,children:[s.jsx("h3",{children:e.props?.title}),e.components?.map(e=>s.jsx(h,{component:e,ctx:{...t,data:a}},e.id)),e.footerActions?.map(e=>s.jsx(h,{component:e,ctx:t},e.id))]})}if("actionBar"===e.type)return s.jsx("div",{className:"card",children:e.components.map(e=>s.jsx(h,{component:e,ctx:t},e.id))});if("list"===e.type){let a=n.getByPath(e.dataBinding)||[];if(e.filterBinding){let t=e.filterBinding.controlId,s=n.controls[t]||n.getByPath(`state.${t}`)||e.filterBinding.default||"all",i=e.filterBinding.map[s];i&&"*"!==i&&(a=a.filter(e=>e.type===i))}return!a.length&&e.emptyState?(0,s.jsxs)("div",{"data-testid":`list-${p}`,children:[s.jsx("strong",{children:e.emptyState.title}),s.jsx("p",{children:e.emptyState.message})]}):s.jsx("div",{"data-testid":`list-${p}`,className:e.props?.className||"",children:a.map((a,i)=>{if(e.props?.itemTemplate==="athleteCard")return(0,s.jsxs)("button",{className:"card","data-testid":`athlete-card-${a.id}`,onClick:()=>o(e.actions,{item:a}),children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"8px"},children:[s.jsx("strong",{children:d(l.Yk.templates.athleteCard.title,{...t,item:a})}),a.status&&s.jsx("span",{className:`badge-${a.status}`,children:a.status})]}),s.jsx("span",{children:d(l.Yk.templates.athleteCard.subtitle,{...t,item:a})}),s.jsx("span",{style:{fontSize:"var(--text-meta)",color:"var(--text-secondary)"},children:d(l.Yk.templates.athleteCard.meta,{...t,item:a})})]},a.id);if(e.props?.itemTemplate==="timelineCard"){let n=l.Yk.templates.timelineCard,r=d(n.badge,{...t,item:a});return(0,s.jsxs)("article",{className:`card ${n.className}`,"data-testid":`timeline-item-${i}`,onClick:()=>o(e.actions,{item:a}),style:{cursor:"pointer"},children:[s.jsx("strong",{children:d(n.title,{...t,item:a})}),s.jsx("p",{children:d(n.subtitle,{...t,item:a})}),s.jsx("p",{children:d(n.body,{...t,item:a})}),r&&s.jsx("span",{className:"feed-item-badge feed-item-badge-strava-sync",children:r}),s.jsx("span",{style:{fontSize:"var(--text-meta)",color:"var(--text-secondary)"},children:d(n.rightContent,{...t,item:a})})]},a.id||i)}return s.jsx("article",{className:"card",children:s.jsx("strong",{children:d(l.Yk.templates.stravaCandidateCard.title,{...t,item:a})})},a.id)})})}return(0,s.jsxs)("div",{children:["Unsupported component ",e.type,i]})}function x({screenId:e,routeParams:t={}}){if(!l._q.ok)return(0,s.jsxs)("main",{className:"page",children:[s.jsx("h1",{children:"Spec validation error"}),s.jsx("pre",{children:l._q.errors.join("\n")})]});let a=l.Yk.screens.find(t=>t.id===e),i=a?.layout?.type==="centered";return s.jsx("div",{style:i?{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"}:void 0,children:s.jsx(m,{screenId:e,routeParams:t})})}},9940:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(8570).createProxy)(String.raw`/workspaces/runsosg/src/components/SpecGate.tsx#default`)}};